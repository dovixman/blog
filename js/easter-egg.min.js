(function(){"use strict";const e={active:!1,stickMan:null,mouseX:0,mouseY:0,stickManX:0,stickManY:0,velocityX:0,velocityY:0,speed:3,panicSpeed:6,panicDistance:150,animationFrame:null,obstacles:[],lastClickTime:0,clickTimeout:null};function n(){const t=document.querySelector(".header-title");if(!t){console.warn("Logo element not found");return}u(),t.addEventListener("click",h),document.addEventListener("mousemove",a),e.stickMan.addEventListener("click",i)}function h(t){const n=Date.now(),s=n-e.lastClickTime;s<500?(t.preventDefault(),c(),clearTimeout(e.clickTimeout)):e.clickTimeout=setTimeout(()=>{e.lastClickTime=0},500),e.lastClickTime=n}function u(){const t=document.createElement("div");t.id="stick-man",t.className="running",t.innerHTML=`
      <div class="stick-man-body">
        <div class="stick-man-head"></div>
        <div class="stick-man-torso"></div>
        <div class="stick-man-arm left"></div>
        <div class="stick-man-arm right"></div>
        <div class="stick-man-leg left"></div>
        <div class="stick-man-leg right"></div>
      </div>
    `,document.body.appendChild(t),e.stickMan=t}function c(){if(e.active)return;e.active=!0,e.stickMan.classList.add("active","running");const n=Math.random()*(window.innerWidth-100)+50,s=Math.random()*(window.innerHeight-150)+100;e.stickManX=n,e.stickManY=s,e.stickMan.style.left=n+"px",e.stickMan.style.top=s+"px",e.velocityX=0,e.velocityY=0,t(),o()}function a(t){e.mouseX=t.clientX,e.mouseY=t.clientY}function i(t){if(!e.active)return;t.stopPropagation(),r()}function r(){e.active=!1,e.stickMan.classList.remove("running","panic"),e.stickMan.classList.add("exploding"),e.animationFrame&&(cancelAnimationFrame(e.animationFrame),e.animationFrame=null),setTimeout(()=>{e.stickMan.classList.remove("active","exploding")},500)}function t(){e.obstacles=[];const t=["header","nav","footer","article",".post",".card",".home-profile",".home-avatar",".single-title",".content",".page",".pagination",".post-footer",".post-nav"];t.forEach(t=>{const n=document.querySelectorAll(t);n.forEach(t=>{if(t.id==="stick-man"||t.closest("#stick-man"))return;const n=t.getBoundingClientRect();n.width>0&&n.height>0&&e.obstacles.push({left:n.left+window.scrollX,top:n.top+window.scrollY,right:n.right+window.scrollX,bottom:n.bottom+window.scrollY,width:n.width,height:n.height})})})}function l(t,n,s=20){const o={left:t-s,top:n-s,right:t+50+s,bottom:n+80+s};for(let t of e.obstacles)if(o.right>t.left&&o.left<t.right&&o.bottom>t.top&&o.top<t.bottom)return t;return null}function d(){const r=e.stickManX+25-e.mouseX,c=e.stickManY+40-e.mouseY,i=(r*r+c*c)**.5,d=i<e.panicDistance,s=d?e.panicSpeed:e.speed;if(d?e.stickMan.classList.add("panic"):e.stickMan.classList.remove("panic"),i>0){const n=r/i,o=c/i;e.velocityX+=n*.5,e.velocityY+=o*.5;const t=(e.velocityX*e.velocityX+e.velocityY*e.velocityY)**.5;t>s&&(e.velocityX=e.velocityX/t*s,e.velocityY=e.velocityY/t*s)}let t=e.stickManX+e.velocityX,n=e.stickManY+e.velocityY;const o=l(t,n);if(o){const c={x:(o.left+o.right)/2,y:(o.top+o.bottom)/2},i=e.stickManX+25-c.x,a=e.stickManY+40-c.y,r=(i*i+a*a)**.5;r>0&&(e.velocityX=i/r*s,e.velocityY=a/r*s,t=e.stickManX+e.velocityX,n=e.stickManY+e.velocityY)}const a=10;t<a&&(t=a,e.velocityX=Math.abs(e.velocityX)),t>window.innerWidth-60&&(t=window.innerWidth-60,e.velocityX=-Math.abs(e.velocityX)),n<a&&(n=a,e.velocityY=Math.abs(e.velocityY)),n>window.innerHeight-90&&(n=window.innerHeight-90,e.velocityY=-Math.abs(e.velocityY)),e.stickManX=t,e.stickManY=n,e.velocityX<-.5?e.stickMan.classList.add("flip"):e.velocityX>.5&&e.stickMan.classList.remove("flip")}function o(){if(!e.active)return;d(),e.stickMan.style.left=e.stickManX+"px",e.stickMan.style.top=e.stickManY+"px",e.animationFrame=requestAnimationFrame(o)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n(),window.addEventListener("resize",()=>{e.active&&t()});let s;window.addEventListener("scroll",()=>{if(!e.active)return;clearTimeout(s),s=setTimeout(()=>{t()},100)})})()